<!DOCTYPE html>
<html>
	<head>
	<title>支付宝电脑网站支付</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body>
    <!-- <form name=alipayment action=pagepay.php method=post target="_blank">
                    <input name="WIDout_trade_no" />
                    <input name="WIDsubject" />
                    <input name="WIDtotal_amount" />
                    <input name="WIDbody" />
                    <button class="new-btn-login" type="submit" style="text-align:center;">付 款</button>
    </form> -->
		<button id="btn" type="button">付 款</button>
		<script type="text/javascript">
		let randNum = "201812111429169";
		randNum += Math.round(Math.random()*10);
		randNum += Math.round(Math.random()*10);
		let countPrice = 0;
		for (let i = 0; i < JSON.parse(localStorage.json).data.length; i++) {
		  countPrice += JSON.parse(localStorage.json).data[i].order * JSON.parse(localStorage.json).data[i].price;
		};
		document.querySelector("#btn").onclick = function(){
			Form = document.createElement("form");
			Form.name = "alipayment";
			Form.style.display = "none";
			Form.action = "pagepay.php";
			Form.method = "post";
			Form.target = "_blank";
			create1 = document.createElement("input");
			create1.name = "WIDout_trade_no";
			create1.value = randNum;
			create2 = document.createElement("input");
			create2.name = "WIDsubject";
			create2.value = "购物车结算";
			create3 = document.createElement("input");
			create3.name = "WIDtotal_amount";
			create3.value = countPrice;
			create4 = document.createElement("input");
			create4.name = "WIDbody";
			create4.value = "群星电商网站";
			Form.appendChild(create1);
			Form.appendChild(create2);
			Form.appendChild(create3);
			Form.appendChild(create4);
			document.body.appendChild(Form);
			Form.submit();
		}
		</script>
    </body>
</html>
